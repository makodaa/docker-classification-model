services:
    backup:
        image: postgres:15-alpine
        container_name: backup-service
        environment:
            - PGPASSWORD=postgres
            - POSTGRES_DB=image_classification
            - POSTGRES_USER=postgres
            - BACKUP_RETENTION_DAYS=7
        volumes:
            - ./backups:/backups
            - ./scripts/backup.sh:/scripts/backup.sh:ro
        networks:
            - app-network
        command: sh /scripts/backup.sh
        restart: unless-stopped

networks:
    default:
        name: ${COMPOSE_PROJECT_NAME:-invasive-plant}_default
        external: false

volumes:
    backups:
